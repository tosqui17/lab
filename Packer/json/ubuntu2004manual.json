{
    "builders": [
      {
        "pause_before_connecting": "1m",
        "remote_datastore": "{{user `esxi_datastore`}}",
        "remote_host": "{{user `esxi_host`}}",
        "remote_username": "{{user `esxi_username`}}",
        "remote_password": "{{user `esxi_password`}}",
        "remote_type": "esx5",
        "ssh_port": 22,
        "skip_export": true,
        "tools_upload_flavor": "linux",
        "type": "vmware-iso",
        "guest_os_type": "ubuntu-64",
        "memory": 1024,
        "cpus": "{{ user `cpus` }}",
        "disk_size": "{{user `disk_size`}}",
        "name": "ubuntu-20.04-live-server",
        "iso_urls":"http://cdimage.ubuntu.com/ubuntu-legacy-server/releases/20.04/release/ubuntu-20.04.1-legacy-server-amd64.iso",
        "iso_checksum": "sha256:f11bda2f2caed8f420802b59f382c25160b114ccc665dbac9c5046e7fceaced2",
        "http_directory": "http",
        "output_directory": "output/live-server",
        "boot_wait": "5s",
        "boot_command": [
          "<wait3><right><left><left><left><left><enter><enter><wait5>",
          "<enter><wait><enter><wait><enter><wait><enter><wait><enter><wait><enter><wait><enter><wait1m>",
          "<bs><bs><bs><bs><bs><bs>lab<enter><wait4>",
          "vagrant<enter><wait3><enter><wait2>",
          "vagrant<enter><wait>ubuntu<enter><wait6>",
          "<left><enter><wait2><enter><wait8>",
          "<enter><wait><enter><wait><left><enter><wait><enter><wait><enter><wait2>",
          "<left><enter><wait><enter><wait5><left><enter><wait3m><enter><wait3m><enter><wait3>",
          "<down><down><down><down><down><down><spacebar><up><up><wait3><enter><wait5m><enter><wait80><enter><wait1m>"
        ],
        
        "vnc_over_websocket": true,
        "insecure_connection": true,
        "shutdown_command": "shutdown -P now",
        "ssh_username": "ubuntu",
        "ssh_password": "ubuntu",
        "ssh_pty": true,
        "ssh_timeout": "20m",
        "ssh_handshake_attempts": "20",
        "vmx_data": {
          "ethernet0.networkName": "{{user `esxi_network_with_dhcp_and_internet` }}",
          "cpuid.coresPerSocket": "1",
          "ethernet0.pciSlotNumber": "32",
          "tools.syncTime": "0",
          "time.synchronize.continue": "0",
          "time.synchronize.restore": "0",
          "time.synchronize.resume.disk": "0",
          "time.synchronize.shrink": "0",
          "time.synchronize.tools.startup": "0",
          "time.synchronize.tools.enable": "0",
          "time.synchronize.resume.host": "0",
          "virtualhw.version": 13
      },
      "vmx_data_post": {
          "ide0:0.present": "FALSE"
      },
      "vnc_disable_password": false,
      "vnc_port_min": 5900,
      "vnc_port_max": 5980
      }
    ],
  
    "provisioners": [
      {
        "type": "shell",
        "inline": ["ls /"]
      }
    ],
  
    "variables": {
      "box_basename": "ubuntu-20.04",
      "http_directory": "{{template_dir}}/http",
      "build_timestamp": "{{isotime \"20060102150405\"}}",
      "cpus": "2",
      "disk_size": "16000",
      "esxi_datastore": "datastore1",
      "esxi_host": "192.168.174.131",
      "esxi_username": "root",
      "esxi_password": "R00t@123",
      "esxi_network_with_dhcp_and_internet": "VM Network",
      "headless": "false",
      "guest_additions_url": "",
      "iso_name": "ubuntu-20.04.1-legacy-server-amd64.iso",
      "memory": "4096",
      "mirror": "http://cdimage.ubuntu.com",
      "mirror_directory": "ubuntu-legacy-server/releases/20.04/release",
      "name": "ubuntu-20.04",
      "no_proxy": "{{env `no_proxy`}}",
      "preseed_path": "preseed.cfg",
      "template": "ubuntu-20.04-amd64",
      "version": "TIMESTAMP"
  }
  }
  